# =============================================================================
# Environment Configuration
# =============================================================================
# Copy this file to .env and adjust values as needed.
# These defaults work with docker-compose.dev.yml out of the box.
# =============================================================================

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
HTTP_HOST=0.0.0.0
HTTP_PORT=8080
REQUEST_TIMEOUT=30
SHUTDOWN_TIMEOUT=30

# -----------------------------------------------------------------------------
# Authentication Keys
# -----------------------------------------------------------------------------
# Generate keys with: make generate-keys
AUTH_PUBLIC_PEM_FILEPATH=./public.pem
AUTH_PRIVATE_PEM_FILEPATH=./private.pem

# -----------------------------------------------------------------------------
# PostgreSQL Database
# -----------------------------------------------------------------------------
# Connection settings (used by docker-compose and application)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=postgres

# Connection URL (constructed from above, used by diesel CLI and application)
POSTGRES_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}
POSTGRES_MAX_CONNECTIONS=10

# -----------------------------------------------------------------------------
# NATS Messaging
# -----------------------------------------------------------------------------
# Connection settings (used by docker-compose and application)
NATS_HOST=localhost
NATS_PORT=4222
NATS_MONITOR_PORT=8222

# Connection URL and client settings
NATS_URL=nats://${NATS_HOST}:${NATS_PORT}
NATS_CLIENT_NAME=nvisy-server
NATS_CONNECT_TIMEOUT=30
NATS_REQUEST_TIMEOUT=30
NATS_MAX_RECONNECTS=10
NATS_RECONNECT_DELAY=2

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
CORS_ALLOWED_ORIGINS=http://localhost:3000,https://app.nvisy.com
CORS_MAX_AGE=3600
CORS_ALLOW_CREDENTIALS=true

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
RUST_LOG=info
RUST_BACKTRACE=0

# -----------------------------------------------------------------------------
# TLS (optional, requires 'tls' feature)
# -----------------------------------------------------------------------------
# TLS_CERT_PATH=./cert.pem
# TLS_KEY_PATH=./key.pem
